---
layout: post
title: "Synopsys多电压实现与验证概述——3 功耗设计意图规范"
date:   2024-8-20
tags: [low power]
comments: true
author: Shuhao
---

<h2 id="3.">3. 功耗设计意图规范</h2>

IEEE 1801标准（也称为统一功耗格式，UPF）为低功耗集成电路的设计和验证提供了一种一致的方法，涵盖了整个设计过程，包括综合、物理实现和验证。这种一致性使得在设计中存在特定的低功耗特性时更容易进行综合、仿真、逻辑等价性检查和设计验证。

在Synopsys流程中指定设计的功耗设计意图在以下章节中有描述：

* [3.1 IEEE 1801标准（UPF）](#3.1)

* [3.2 功耗设计意图概念](#3.2)

* [3.3 电源网络示例](#3.3)

* [3.4 Synopsys工具支持的UPF命令](#3.4)

* [3.5 UPF命令跟踪](#3.5)

* [3.6 标准UPF流程](#3.6)

<h3 id="3.1">3.1 IEEE 1801标准（UPF）</h3>

IEEE 1801 低功耗集成电路设计与验证标准又称统一电源格式（UPF），由一组类似 Tcl 的命令组成，用于指定多电压电子系统的设计意图。使用 UPF 命令，您可以为芯片设计指定电源网络、开关、隔离、保持以及电源管理的其他方面。在整个设计、分析、验证和实现流程中，都可以使用一套低功耗设计规范命令。

Synopsys 工具的设计遵循 IEEE 标准协会批准的 IEEE 1801 (UPF) 标准。包括 Synopsys 在内的许多 EDA 公司都支持这一标准。有关该标准的详细信息，请参见 IEEE 1801 规范本身，可从 IEEE 标准协会网站 <http://standards.ieee.org> 下载。

Synopsys 工具支持 IEEE 1801 (UPF) 标准中的大量命令子集。此外，它们还支持一些不属于该标准的类似 UPF 的电源意图命令。

<h4 id="3.1.1">3.1.1 UPF命令中的通配符模式匹配</h4>

IEEE 1801 LRM（Language Reference Manual）指出，通配符模式匹配只允许在`find_objects`和`upf_query`命令中使用。然而，Synopsys工具为许多UPF命令提供了通配符匹配功能，以提高易用性。

通配符模式匹配使用以下特殊运算符：
- `?` 匹配除层级分隔符 `/` 之外的任何单个字符。
- `*` 匹配除层级分隔符之外的任何零个或多个字符。

所有执行基于模式的对象查找的UPF命令都支持 `?` 和 `*` 通配符，并且对象查找发生在当前作用域中。表1展示了一些通配符匹配的例子。

| 模式      | 匹配         |
| --------- | ------------ |
| a         | a            |
| e*        | e12, eac, ef |
| d?f       | daf, d4f     |
| a/b\*/c\* | a/baa/c1aa   |

<h3 id="3.2">3.2 功耗设计意图概念</h3>

UPF语言建立了一套命令来指定电子系统的低功耗设计意图。使用UPF命令，你可以指定芯片设计的供电网络、开关、隔离、保持以及其他与电源管理相关的方面。同一套低功耗设计规范命令将在整个设计、分析、验证和实现流程中使用。Synopsys工具被设计为遵循官方的IEEE 1801 UPF标准。

UPF语言提供了一种指定设计的电源需求的方法，但并没有明确规定这些需求是如何实现的。该语言规定了如何为每个设计元素创建一个供电网络，不同电源网络之间的行为，以及如何扩展逻辑功能以支持设计元素的动态电源切换。它不包含任何布局或布线信息。

在UPF语言中，电源域是指设计中共享一组共同电源需求的元素集合。默认情况下，电源域中的所有逻辑元件使用相同的主电源和主接地。也可以为电源域定义其他电源。电源域通常在物理芯片布局中作为一个连续的电压区域来实现，但这并不是语言的要求。

每个电源域都有一个 `scope` 和 `extent`。`scope`是指被指定为该域根的逻辑层次。`extent`是指属于电源域并共享相同电压需求的一组逻辑元件。范围是在哪个层次定义电源域的层次级别，并且是属于该电源域的元件的祖先，而程度则是实际属于电源域的元件集合。

每个设计范围在其定义的层次级别上都有供电网络和供电端口。供电网络是一个导体，它在给定的电源域中传输供电电压或接地。跨越多个电源域的供电网络被称为在多个域中“重用”。供电端口是设计层次结构中两个相邻级别之间的电源连接点，即父块和子块之间的连接点。跨越设计层次结构一个级别到下一个级别的供电网络通过供电端口传输。

供电集是供电网络的抽象集合，由两个供电功能组成：电源和接地。供电集是域无关的，这意味着供电集中的电源和接地可以被创建该供电集的范围内定义的任何电源域使用。然而，每个电源域可以被限制在该电源域内使用供电集。

您可以使用供电集在RTL级别定义电源意图，因此即使在不知道实际供电网络名称之前也可以综合设计。供电集是供电网络和供电端口的抽象，设计在物理实现（布局和布线）之前，其供电集必须被细化或与实际供电网络关联。

供电集句柄是为电源域创建的抽象供电集。默认情况下，电源域具有该域的主供电集、默认隔离供电集和默认保持供电集的供电集句柄。这些供电集句柄允许您在为电源域创建任何供电集、供电网络和供电端口之前综合设计。在这样的设计可以物理实现之前，其供电集句柄必须被细化或与实际供电集关联；这些供电集必须被细化，以便它们与实际供电网络关联。

电源开关（或简称开关）是一种为供电网络开启和关闭电源的设备。开关具有一个输入供电网络、一个可以开启或关闭的输出供电网络，以及至少一个用于控制开关的输入信号。开关可以选择性地具有多个输入控制信号和一个或多个输出确认信号。电源状态表列出了设计中所有电源域的电压值和电源开关状态的允许组合。

当逻辑信号从一个电源域离开并进入另一个具有显著不同供电电压的电源域时，必须存在电平转换器。电平转换器将信号从第一个域的电压摆幅转换为第二个域的电压摆幅。

当逻辑信号离开可切换电源域并进入不同电源域时，必须存在隔离单元。电平转换器在域关闭期间生成已知的逻辑值。如果两个域的电压水平有显著差异，接口单元必须能够执行电平转换（当域通电时）和隔离（当域断电时）。能够执行这两种功能的单元称为使能电平转换器。

在具有电源切换的电源域中，任何在关闭期间必须保留数据的寄存器都必须实现为保持寄存器。保持寄存器具有一个独立的、始终开启的供电网络，有时称为备用电源，当域的主供电关闭时，它保持保持寄存器中的数据稳定。

<h3 id="3.3">3.3 电源网络示例</h3>

