---
layout: post
title: "Synopsys多电压实现与验证概述——2 标准单元库要求"
date:   2024-8-19
tags: [low power]
comments: true
author: Shuhao
---

<h2 id="2.">2. 标准单元库要求</h2>

为了使用诸如时钟门控、多电压、多阈值电压 (Vt) 库单元或电源门控等节能策略，库必须包含支持这些策略的逻辑单元。以下是一些支持低电压设计的单元类型描述：

* [2.1 Liberty PG 引脚语法](#2.1)

* [2.2 时钟门控单元](#2.2)

* [2.3 多阈值电压单元](#2.3)

* [2.4 电平转换器](#2.4)

* [2.5 隔离单元](#2.5)

* [2.6 电源门控单元](#2.6)

* [2.7 常开逻辑单元](#2.7)

* [2.8 状态保持寄存器](#2.8)

* [2.9 具有内部生成电源的宏单元](#2.9)

* [2.10 将库转换为 PG 引脚库格式](#2.10)

<h3 id="2.1">2.1 Liberty PG 引脚语法</h3>

在早期的 CMOS 技术世代中，芯片上的所有器件始终连接到单一的全芯片电源。逻辑库中没有包含单元的电源连接信息，因为所有单元都共享相同的 VDD 和 VSS 连接。

然而，随着芯片上多电源使用的增加，有必要指定哪些电源可以连接到每个单元的特定电源引脚。对于某些类型的单元，如电平转换器，为同一个单元的不同电源引脚指定不同的电源已经成为必要。

为了适应这类信息的需求，Liberty库的语法被扩展以支持对单元电源引脚的电源轨连接的指定。这种电源和地（PG）引脚信息使得综合、实现和验证工具能够针对电源优化设计，正确地在布局中连接单元，并分析使用多种供电电压的设计行为。

有关PG引脚语法和电源引脚连接建模的更多信息，请参阅《Library Compiler™ 用户指南》中的“高级低功耗建模”部分，在Library Compiler在线文档中可以找到。

对于没有PG引脚的旧库，您可以使用Design Compiler或IC Compiler中的`add_pg_pin_to_lib`或`add_pg_pin_to_db`命令快速添加PG引脚，从而使库兼容UPF（统一电源格式）电源规范。或者，您可以使用`update_lib_model`命令使用FRAM模型更新库，或使用`update_lib_voltage_model`、`update_lib_pg_pin_model`和`update_lib_pin_model`命令来提供PG引脚信息。具体细节，请参见“将库转换为PG引脚库格式”。

<h3 id="2.2">2.2 时钟门控单元</h3>

综合工具如Power Compiler可以确定在何处可以使用时钟门控来提供最大的节能效益，并可以自动将时钟门控电路插入设计中以实现时钟门控功能。

在现有的时钟网络中插入时钟门控电路可能会引入时钟偏斜，这会对时序产生不利影响。为了让综合工具在综合过程中考虑这些影响，您可以使工具使用预定义的集成时钟门控单元，这些单元可以作为库中的逻辑单元被提供。集成时钟门控单元将时钟门控的各种组合和时序元件整合到单个库单元中。图12展示了集成时钟门控单元的一种可能实现方式。

<center>
    <img style="border-radius: 0.3125em;
    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);" 
    src="2024-8-19-smvfug_p2.assets/image-20240819162237661.png" width = "65%" alt=""/>
    <br>
    <div style="color:orange; border-bottom: 1px solid #d9d9d9;
    display: inline-block;
    color: #999;
    padding: 2px;">
      图12 集成时钟门控单元示例
  	</div>
</center>

时钟门控单元可以集成各种逻辑，例如多个使能输入、测试时钟输入、全局扫描输入、异步复位锁存器、低电平使能逻辑或反相门控时钟输出。Power Compiler可以自由优化围绕时钟门控单元的使能逻辑，通过将周围的逻辑吸收到单元内部可用的逻辑函数中。

关于创建和使用集成时钟门控单元的更多信息，请参阅：
- 《Library Compiler™ 用户指南》中的“在Library Compiler在线文档中进行功率和电迁移建模”
- 《Power Compiler™ 用户指南》中的“时钟门控”，可在Synthesis在线帮助中找到。

<h3 id="2.3">2.3 多阈值电压单元</h3>

多阈值电压库支持每个逻辑门的两种或更多不同阈值电压组。阈值电压决定了逻辑单元的延迟和泄漏特性。具有较低阈值电压的单元可以更快地切换，但泄漏电流更大；而具有较高阈值电压的单元泄漏电流较小，但切换延迟较长。

Liberty 库语法使用 `default_threshold_voltage_group` 属性支持在同一库中使用不同阈值电压的单元。该属性定义在库级别，根据单元的电压特性指定单元所属类别的名称。该属性的语法如下：

```
default_threshold_voltage_group : “group_name”；
```
下面的示例显示了 `default_threshold_voltage_group` 属性的用法。

```
default_threshold_voltage_group : “high_vt_cell”；
```

Liberty 库语法还支持可选的单元级 `threshold_voltage_group` 属性，您可以用它将一个单元与一个或多个阈值电压类别关联起来，如下例所示：

```
cell (AND1_H) {
...
threshold_voltage_group "high_vt_cell";
...
}
cell (AND1_L) {
...
threshold_voltage_group "low_vt_cell";
...
}
```

<h3 id="2.4">2.4 电平转换器</h3>

<h3 id="2.5">2.5 隔离单元</h3>

<h3 id="2.6">2.6 电源门控单元</h3>

<h3 id="2.7">2.7 常开逻辑单元</h3>

<h3 id="2.8">2.8 状态保持寄存器</h3>

<h3 id="2.9">2.9 具有内部生成电源的宏单元</h3>

<h3 id="2.10">2.10 将库转换为 PG 引脚库格式</h3>
