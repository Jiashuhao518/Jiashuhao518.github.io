---
layout: post
title: "UPF低功耗实现系列博客——3 UPF电源域编码"
date:   2024-10-24
tags: [low power]
comments: true
author: Shuhao
---

## Power Domain 介绍

定义：一组实例被视为一个整体进行电源管理。这些实例通常（但不总是）共享一个主电源集（primary supply set）。一个电源域还可以有额外的电源，包括保持电源和隔离电源。

```tcl
create_power_domain domain_name
    [-atomic]
    [-elements element_list]
    [-subdomains domain_list]
    [-exclude_elements exclude_list]
    [-supply {supply_set_handle [supply_set_ref]}]*
    [-available_supplies supply_set_ref_list]
    [-define_func_type {supply_ function pg_type_list}]*
    [-update]
```

- domain_name：电源域的名称，应到为当前scope内的简单名称。
    - 推荐的命名样式：PD_hierarchy_attribute, example: PD_cpu_high, PD_core_off
- elements：指定了一组包含在电源域范围内的根实例。
    - `-elements {.}`指的是当前scope内的所有实例。
- exclude_elements：排除在电源域范围内的根实例。
- supply：定义了电源域的supply set handle，primary/default_isolation/default_retention，用户定义handle
- available_supplies：定义了电源域的可用supply set。
    - 不定义时，当前power domain中的所有supply set都是逻辑上被用到。
- update：incremental更新。

### Scope

支持的scope类型：
- Hierarchical Instance (Module)：推荐
- Separate Instance (Buff1, Buff2)：不推荐
- IP Instance (Memory1, Memory2)：不推荐

原因：
- Separate Instance：物理设计期间不适用
- IP Instance：
    - 使用Hierarchical UPF：Low power cell易于插入
    - 只需将它们视为常规Instance：flow中更方便

### Domain 分类


